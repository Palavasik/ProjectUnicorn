# API Документация

## Telegram Bot API

### Команды бота

#### `/start`
Приветствие и ценностное предложение продукта.

**Ответ**: Текст с описанием возможностей и предложением использовать `/find`.

#### `/help`
Список доступных команд.

**Ответ**: Текст со списком команд: /start, /find, /cancel, /help.

#### `/find`
Начало сценария поиска маршрута.

**Ответ**: Inline-кнопки с выбором города.

#### `/cancel`
Отмена текущего поиска (в контексте ConversationHandler).

**Ответ**: Подтверждение отмены.

### Callback-кнопки (inline)

#### Выбор города
- `callback_data`: `city:{название_города}` (например: `city:Москва`)
- После выбора: запрос дистанции в км.

#### Выбор типа поверхности
- `callback_data`: `surface:{тип}` (asphalt, park, trail, embankment)
- После выбора: вывод списка маршрутов.

### Формат ответа со списком маршрутов

Текст в HTML:
- Название маршрута (bold)
- Дистанция и тип поверхности
- Описание
- Особенности
- Ссылка на карту (если есть)

### Внешние API

**OpenRouteService** (при наличии `OPENROUTESERVICE_API_KEY`):
- `GET /geocode/search` — геокодинг города
- `POST /v2/directions/foot-walking/geojson` — построение маршрута с `extra_info: ["surface"]`

**Fallback:** при отсутствии ключа или ошибке ORS — данные из `data/routes.json`.

## Запуск

Бот работает в режиме **polling** (локально). Webhook не используется в MVP.
